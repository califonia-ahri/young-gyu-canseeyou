{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\노수지\\\\Desktop\\\\apis\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\노수지\\\\Desktop\\\\apis\",\"filename\":\"C:\\\\Users\\\\노수지\\\\Desktop\\\\apis\\\\src\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\노수지\\\\Desktop\\\\apis\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.18.10:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _socket = require(\"socket.io\");\n\nvar _adminUi = require(\"@socket.io/admin-ui\");\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar app = (0, _express[\"default\"])(); //볼 사이트 엔진을 pug로 설정\n\napp.set(\"view engine\", \"pug\"); //세팅할 파일을 views 내 파일로 설정\n\napp.set(\"views\", __dirname + \"/views\"); //유저가 홈페이지를 들어가게되면 __dirname/public 파일을 보여준다.\n\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\")); //home 디렉터리로 가면 요청 응답을 받아 내가 만든 home을 렌더링한다\n\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n}); //url은 하나만 쓸것이므로 어떤 url을 가든 홈디렉토리를 렌더링\n\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\n\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\n\nvar httpServer = _http[\"default\"].createServer(app);\n\nvar wsServer = new _socket.Server(httpServer, {\n  cors: {\n    origin: [\"https://admin.socket.io\"],\n    credentials: true\n  }\n});\n(0, _adminUi.instrument)(wsServer, {\n  auth: false\n});\n\nfunction publicRooms() {\n  var sids = wsServer.sockets.adapter.sids;\n  var rooms = wsServer.sockets.adapter.rooms;\n  var publicRooms = [];\n  rooms.forEach(function (_, key) {\n    if (sids.get(key) === undefined) {\n      publicRooms.push(key);\n    }\n  });\n  return publicRooms;\n}\n\nfunction countRoom(roomName) {\n  return wsServer.sockets.adapter.rooms.get(roomName).size;\n}\n\nwsServer.on(\"connection\", function (socket) {\n  socket[\"nickname\"] = \"Anon\";\n  socket.onAny(function (event) {\n    console.log(\"Socket Event: \".concat(event));\n  }); //방에 들어왔을 때\n\n  socket.on(\"room\", function (roomName, done) {\n    socket.join(roomName);\n    done();\n    socket.to(roomName).emit(\"welcome\", socket.nickname, countRoom(roomName));\n    wsServer.sockets.emit(\"room_change\", publicRooms());\n  }); //방에 연결이 끊길 때\n\n  socket.on(\"disconnecting\", function () {\n    socket.rooms.forEach(function (room) {\n      return socket.to(room).emit(\"bye\", socket.nickname, countRoom(room) - 1);\n    });\n  }); //방에 완전히 끊겼을 때\n\n  socket.on(\"disconnect\", function () {\n    wsServer.sockets.emit(\"room_change\", publicRooms());\n  });\n  socket.on(\"new_msg\", function (msg, room, done) {\n    socket.to(room).emit(\"new_msg\", \"\".concat(socket.nickname, \": \").concat(msg));\n    done();\n  });\n  socket.on(\"nickname\", function (nick) {\n    socket[\"nickname\"] = nick;\n  });\n});\nhttpServer.listen(3000, handleListen); //http서버위에 ws서버를 만들어 결과적으로 하나의 서버로 동시에 돌린다.\n// const wss = new WebSocket.Server({server});\n//프론트로 받은 메시지 창고\n//const sockets = [];\n// wss.on(\"connection\", (socket) => {\n//     sockets.push(socket);\n//     socket[\"nickname\"] = \"Anon\";\n//     console.log(\"Connected to Browser\");\n//     socket.on(\"close\",() => console.log(\"Disconnected from Browser\"));\n//     socket.on(\"message\", (msg) => {\n//         const message = JSON.parse(msg);\n//         switch(message.type){\n//             case \"new_message\":\n//                 sockets.forEach((aSocket) =>\n//                 aSocket.send(`${socket.nickname}: ${message.payload}`));\n//             case \"nickname\":\n//                 socket[\"nickname\"] = message.payload;\n//         }\n//     });\n// });\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHAiLCJleHByZXNzIiwic2V0IiwiX19kaXJuYW1lIiwidXNlIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicmVkaXJlY3QiLCJoYW5kbGVMaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiaHR0cFNlcnZlciIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJ3c1NlcnZlciIsIlNlcnZlciIsImNvcnMiLCJvcmlnaW4iLCJjcmVkZW50aWFscyIsImluc3RydW1lbnQiLCJhdXRoIiwicHVibGljUm9vbXMiLCJzaWRzIiwic29ja2V0cyIsImFkYXB0ZXIiLCJyb29tcyIsImZvckVhY2giLCJfIiwia2V5IiwidW5kZWZpbmVkIiwicHVzaCIsImNvdW50Um9vbSIsInJvb21OYW1lIiwic2l6ZSIsIm9uIiwic29ja2V0Iiwib25BbnkiLCJldmVudCIsImRvbmUiLCJqb2luIiwidG8iLCJlbWl0Iiwibmlja25hbWUiLCJyb29tIiwibXNnIiwibmljayIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFzrhbjsiJjsp4BcXERlc2t0b3BcXGFwaXNcXHNyY1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgU2VydmVyIH0gZnJvbSBcInNvY2tldC5pb1wiO1xyXG5pbXBvcnQgeyBpbnN0cnVtZW50IH0gZnJvbSBcIkBzb2NrZXQuaW8vYWRtaW4tdWlcIjtcclxuaW1wb3J0IGh0dHAgZnJvbSBcImh0dHBcIjtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuXHJcbi8v67O8IOyCrOydtO2KuCDsl5Tsp4TsnYQgcHVn66GcIOyEpOyglVxyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XHJcblxyXG4vL+yEuO2Mhe2VoCDtjIzsnbzsnYQgdmlld3Mg64K0IO2MjOydvOuhnCDshKTsoJVcclxuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3ZpZXdzXCIpO1xyXG5cclxuLy/snKDsoIDqsIAg7ZmI7Y6Y7J207KeA66W8IOuTpOyWtOqwgOqyjOuQmOuptCBfX2Rpcm5hbWUvcHVibGljIO2MjOydvOydhCDrs7Tsl6zspIDri6QuXHJcbmFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArIFwiL3B1YmxpY1wiKSk7XHJcblxyXG4vL2hvbWUg65SU66CJ7YSw66as66GcIOqwgOuptCDsmpTssq0g7J2R64u17J2EIOuwm+yVhCDrgrTqsIAg66eM65OgIGhvbWXsnYQg66CM642U66eB7ZWc64ukXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcImhvbWVcIikpO1xyXG4vL3VybOydgCDtlZjrgpjrp4wg7JO46rKD7J2066+A66GcIOyWtOuWpCB1cmzsnYQg6rCA65OgIO2ZiOuUlOugie2GoOumrOulvCDroIzrjZTrp4FcclxuYXBwLmdldChcIi8qXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlZGlyZWN0KFwiL1wiKSk7XHJcblxyXG5jb25zdCBoYW5kbGVMaXN0ZW4gPSAoKSA9PiBjb25zb2xlLmxvZyhcIkxpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBcIik7XHJcblxyXG5jb25zdCBodHRwU2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcclxuY29uc3Qgd3NTZXJ2ZXIgPSBuZXcgU2VydmVyKGh0dHBTZXJ2ZXIsIHtcclxuICAgIGNvcnM6IHtcclxuICAgICAgICBvcmlnaW46IFtcImh0dHBzOi8vYWRtaW4uc29ja2V0LmlvXCJdLFxyXG4gICAgICAgIGNyZWRlbnRpYWxzOiB0cnVlLFxyXG4gICAgfSxcclxufSk7XHJcblxyXG5pbnN0cnVtZW50KHdzU2VydmVyLCB7XHJcbiAgICBhdXRoOiBmYWxzZSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBwdWJsaWNSb29tcygpIHtcclxuICAgIGNvbnN0IHNpZHMgPSB3c1NlcnZlci5zb2NrZXRzLmFkYXB0ZXIuc2lkcztcclxuICAgIGNvbnN0IHJvb21zID0gd3NTZXJ2ZXIuc29ja2V0cy5hZGFwdGVyLnJvb21zO1xyXG4gICAgY29uc3QgcHVibGljUm9vbXMgPSBbXTtcclxuICAgIHJvb21zLmZvckVhY2goKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGlmIChzaWRzLmdldChrZXkpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcHVibGljUm9vbXMucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHB1YmxpY1Jvb21zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb3VudFJvb20ocm9vbU5hbWUpIHtcclxuICAgIHJldHVybiB3c1NlcnZlci5zb2NrZXRzLmFkYXB0ZXIucm9vbXMuZ2V0KHJvb21OYW1lKS5zaXplO1xyXG59XHJcblxyXG53c1NlcnZlci5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xyXG4gICAgc29ja2V0W1wibmlja25hbWVcIl0gPSBcIkFub25cIjtcclxuICAgIHNvY2tldC5vbkFueSgoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgU29ja2V0IEV2ZW50OiAke2V2ZW50fWApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/rsKnsl5Ag65Ok7Ja07JmU7J2EIOuVjFxyXG4gICAgc29ja2V0Lm9uKFwicm9vbVwiLCAocm9vbU5hbWUsIGRvbmUpID0+IHtcclxuICAgICAgICBzb2NrZXQuam9pbihyb29tTmFtZSk7XHJcbiAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgIHNvY2tldC50byhyb29tTmFtZSkuZW1pdChcIndlbGNvbWVcIiwgc29ja2V0Lm5pY2tuYW1lLCBjb3VudFJvb20ocm9vbU5hbWUpKTtcclxuICAgICAgICB3c1NlcnZlci5zb2NrZXRzLmVtaXQoXCJyb29tX2NoYW5nZVwiLCBwdWJsaWNSb29tcygpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v67Cp7JeQIOyXsOqysOydtCDrgYrquLgg65WMXHJcbiAgICBzb2NrZXQub24oXCJkaXNjb25uZWN0aW5nXCIsICgpID0+IHtcclxuICAgICAgICBzb2NrZXQucm9vbXMuZm9yRWFjaCgocm9vbSkgPT5cclxuICAgICAgICAgICAgc29ja2V0LnRvKHJvb20pLmVtaXQoXCJieWVcIiwgc29ja2V0Lm5pY2tuYW1lLCBjb3VudFJvb20ocm9vbSkgLSAxKVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+uwqeyXkCDsmYTsoITtnogg64GK6rK87J2EIOuVjFxyXG4gICAgc29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XHJcbiAgICAgICAgd3NTZXJ2ZXIuc29ja2V0cy5lbWl0KFwicm9vbV9jaGFuZ2VcIiwgcHVibGljUm9vbXMoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzb2NrZXQub24oXCJuZXdfbXNnXCIsIChtc2csIHJvb20sIGRvbmUpID0+IHtcclxuICAgICAgICBzb2NrZXQudG8ocm9vbSkuZW1pdChcIm5ld19tc2dcIiwgYCR7c29ja2V0Lm5pY2tuYW1lfTogJHttc2d9YCk7XHJcbiAgICAgICAgZG9uZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc29ja2V0Lm9uKFwibmlja25hbWVcIiwgKG5pY2spID0+IHtcclxuICAgICAgICBzb2NrZXRbXCJuaWNrbmFtZVwiXSA9IG5pY2s7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5odHRwU2VydmVyLmxpc3RlbigzMDAwLCBoYW5kbGVMaXN0ZW4pO1xyXG5cclxuLy9odHRw7ISc67KE7JyE7JeQIHdz7ISc67KE66W8IOunjOuTpOyWtCDqsrDqs7zsoIHsnLzroZwg7ZWY64KY7J2YIOyEnOuyhOuhnCDrj5nsi5zsl5Ag64+M66aw64ukLlxyXG4vLyBjb25zdCB3c3MgPSBuZXcgV2ViU29ja2V0LlNlcnZlcih7c2VydmVyfSk7XHJcblxyXG4vL+2UhOuhoO2KuOuhnCDrsJvsnYAg66mU7Iuc7KeAIOywveqzoFxyXG4vL2NvbnN0IHNvY2tldHMgPSBbXTtcclxuXHJcbi8vIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHNvY2tldCkgPT4ge1xyXG4vLyAgICAgc29ja2V0cy5wdXNoKHNvY2tldCk7XHJcbi8vICAgICBzb2NrZXRbXCJuaWNrbmFtZVwiXSA9IFwiQW5vblwiO1xyXG4vLyAgICAgY29uc29sZS5sb2coXCJDb25uZWN0ZWQgdG8gQnJvd3NlclwiKTtcclxuLy8gICAgIHNvY2tldC5vbihcImNsb3NlXCIsKCkgPT4gY29uc29sZS5sb2coXCJEaXNjb25uZWN0ZWQgZnJvbSBCcm93c2VyXCIpKTtcclxuLy8gICAgIHNvY2tldC5vbihcIm1lc3NhZ2VcIiwgKG1zZykgPT4ge1xyXG4vLyAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKG1zZyk7XHJcbi8vICAgICAgICAgc3dpdGNoKG1lc3NhZ2UudHlwZSl7XHJcbi8vICAgICAgICAgICAgIGNhc2UgXCJuZXdfbWVzc2FnZVwiOlxyXG4vLyAgICAgICAgICAgICAgICAgc29ja2V0cy5mb3JFYWNoKChhU29ja2V0KSA9PlxyXG4vLyAgICAgICAgICAgICAgICAgYVNvY2tldC5zZW5kKGAke3NvY2tldC5uaWNrbmFtZX06ICR7bWVzc2FnZS5wYXlsb2FkfWApKTtcclxuLy8gICAgICAgICAgICAgY2FzZSBcIm5pY2tuYW1lXCI6XHJcbi8vICAgICAgICAgICAgICAgICBzb2NrZXRbXCJuaWNrbmFtZVwiXSA9IG1lc3NhZ2UucGF5bG9hZDtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gfSk7Il0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBTUEsR0FBRyxHQUFHLElBQUFDLG1CQUFBLEdBQVosQyxDQUVBOztBQUNBRCxHQUFHLENBQUNFLEdBQUosQ0FBUSxhQUFSLEVBQXVCLEtBQXZCLEUsQ0FFQTs7QUFDQUYsR0FBRyxDQUFDRSxHQUFKLENBQVEsT0FBUixFQUFpQkMsU0FBUyxHQUFHLFFBQTdCLEUsQ0FF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","map":{"version":3,"names":["app","express","set","__dirname","use","get","req","res","render","redirect","handleListen","console","log","httpServer","http","createServer","wsServer","Server","cors","origin","credentials","instrument","auth","publicRooms","sids","sockets","adapter","rooms","forEach","_","key","undefined","push","countRoom","roomName","size","on","socket","onAny","event","done","join","to","emit","nickname","room","msg","nick","listen"],"sourceRoot":"C:\\Users\\노수지\\Desktop\\apis\\src\\","sources":["server.js"],"sourcesContent":["import express from \"express\";\r\nimport { Server } from \"socket.io\";\r\nimport { instrument } from \"@socket.io/admin-ui\";\r\nimport http from \"http\";\r\n\r\nconst app = express();\r\n\r\n//볼 사이트 엔진을 pug로 설정\r\napp.set(\"view engine\", \"pug\");\r\n\r\n//세팅할 파일을 views 내 파일로 설정\r\napp.set(\"views\", __dirname + \"/views\");\r\n\r\n//유저가 홈페이지를 들어가게되면 __dirname/public 파일을 보여준다.\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\n\r\n//home 디렉터리로 가면 요청 응답을 받아 내가 만든 home을 렌더링한다\r\napp.get(\"/\", (req, res) => res.render(\"home\"));\r\n//url은 하나만 쓸것이므로 어떤 url을 가든 홈디렉토리를 렌더링\r\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\r\n\r\nconst handleListen = () => console.log(\"Listening on http://localhost:3000\");\r\n\r\nconst httpServer = http.createServer(app);\r\nconst wsServer = new Server(httpServer, {\r\n    cors: {\r\n        origin: [\"https://admin.socket.io\"],\r\n        credentials: true,\r\n    },\r\n});\r\n\r\ninstrument(wsServer, {\r\n    auth: false,\r\n});\r\n\r\nfunction publicRooms() {\r\n    const sids = wsServer.sockets.adapter.sids;\r\n    const rooms = wsServer.sockets.adapter.rooms;\r\n    const publicRooms = [];\r\n    rooms.forEach((_, key) => {\r\n        if (sids.get(key) === undefined) {\r\n            publicRooms.push(key);\r\n        }\r\n    });\r\n    return publicRooms;\r\n}\r\n\r\nfunction countRoom(roomName) {\r\n    return wsServer.sockets.adapter.rooms.get(roomName).size;\r\n}\r\n\r\nwsServer.on(\"connection\", (socket) => {\r\n    socket[\"nickname\"] = \"Anon\";\r\n    socket.onAny((event) => {\r\n        console.log(`Socket Event: ${event}`);\r\n    });\r\n\r\n    //방에 들어왔을 때\r\n    socket.on(\"room\", (roomName, done) => {\r\n        socket.join(roomName);\r\n        done();\r\n        socket.to(roomName).emit(\"welcome\", socket.nickname, countRoom(roomName));\r\n        wsServer.sockets.emit(\"room_change\", publicRooms());\r\n    });\r\n\r\n    //방에 연결이 끊길 때\r\n    socket.on(\"disconnecting\", () => {\r\n        socket.rooms.forEach((room) =>\r\n            socket.to(room).emit(\"bye\", socket.nickname, countRoom(room) - 1)\r\n        );\r\n    });\r\n\r\n    //방에 완전히 끊겼을 때\r\n    socket.on(\"disconnect\", () => {\r\n        wsServer.sockets.emit(\"room_change\", publicRooms());\r\n    });\r\n\r\n    socket.on(\"new_msg\", (msg, room, done) => {\r\n        socket.to(room).emit(\"new_msg\", `${socket.nickname}: ${msg}`);\r\n        done();\r\n    });\r\n\r\n    socket.on(\"nickname\", (nick) => {\r\n        socket[\"nickname\"] = nick;\r\n    });\r\n});\r\n\r\nhttpServer.listen(3000, handleListen);\r\n\r\n//http서버위에 ws서버를 만들어 결과적으로 하나의 서버로 동시에 돌린다.\r\n// const wss = new WebSocket.Server({server});\r\n\r\n//프론트로 받은 메시지 창고\r\n//const sockets = [];\r\n\r\n// wss.on(\"connection\", (socket) => {\r\n//     sockets.push(socket);\r\n//     socket[\"nickname\"] = \"Anon\";\r\n//     console.log(\"Connected to Browser\");\r\n//     socket.on(\"close\",() => console.log(\"Disconnected from Browser\"));\r\n//     socket.on(\"message\", (msg) => {\r\n//         const message = JSON.parse(msg);\r\n//         switch(message.type){\r\n//             case \"new_message\":\r\n//                 sockets.forEach((aSocket) =>\r\n//                 aSocket.send(`${socket.nickname}: ${message.payload}`));\r\n//             case \"nickname\":\r\n//                 socket[\"nickname\"] = message.payload;\r\n//         }\r\n//     });\r\n// });"],"mappings":"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"}},"mtime":1660999248467}}